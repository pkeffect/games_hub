<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games Hub</title>
    <style>
        /* GAMES HUB - COMPLETE INLINE STYLES */
        :root {
            --app-bg: #212121;
            --app-surface: #2a2a2a;
            --app-surface-hover: #333333;
            --app-border: #404040;
            --app-text-primary: #ffffff;
            --app-text-secondary: #b0b0b0;
            --app-text-muted: #808080;
            --app-accent: #8b5cf6;
            --app-accent-hover: #7c3aed;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --color-info: #06b6d4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--app-bg);
            color: var(--app-text-primary);
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--app-surface);
            border-bottom: 1px solid var(--app-border);
            padding: 2rem 1.5rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .header-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .header-icon {
            font-size: 1.75rem;
            filter: drop-shadow(0 2px 4px rgba(139, 92, 246, 0.3));
        }

        .header h1 {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--app-text-primary);
            letter-spacing: -0.025em;
        }

        .header-subtitle {
            color: var(--app-text-secondary);
            font-size: 0.875rem;
            font-weight: 400;
        }

        /* Controls */
        .controls-section {
            background: var(--app-surface);
            border-bottom: 1px solid var(--app-border);
            padding: 1rem 1.5rem;
            position: sticky;
            top: 100px;
            z-index: 99;
            backdrop-filter: blur(10px);
        }

        .search-wrapper {
            max-width: 1200px;
            margin: 0 auto 1rem;
        }

        .search-input-container {
            position: relative;
            max-width: 400px;
            margin: 0 auto;
        }

        .search-icon {
            position: absolute;
            left: 0.875rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--app-text-muted);
            pointer-events: none;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: var(--app-bg);
            border: 1px solid var(--app-border);
            border-radius: 0.5rem;
            color: var(--app-text-primary);
            font-size: 0.875rem;
            transition: all 0.2s ease;
            outline: none;
        }

        .search-input:focus {
            border-color: var(--app-accent);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .search-input::placeholder {
            color: var(--app-text-muted);
        }

        .category-filters {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            max-width: 1200px;
            margin: 0 auto;
        }

        .category-btn {
            padding: 0.5rem 1rem;
            background: var(--app-bg);
            border: 1px solid var(--app-border);
            border-radius: 0.375rem;
            color: var(--app-text-secondary);
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .category-btn:hover {
            background: var(--app-surface-hover);
            border-color: var(--app-accent);
            color: var(--app-text-primary);
        }

        .category-btn.active {
            background: var(--app-accent);
            border-color: var(--app-accent);
            color: white;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 2rem 1.5rem;
        }

        .games-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        /* Game Cards */
        .game-card {
            background: var(--app-surface);
            border: 1px solid var(--app-border);
            border-radius: 0.75rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.05), transparent);
            transition: left 0.6s ease;
        }

        .game-card:hover::before {
            left: 100%;
        }

        .game-card:hover {
            transform: translateY(-2px);
            border-color: var(--app-accent);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(139, 92, 246, 0.1);
        }

        .game-card.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .game-card.disabled:hover {
            transform: none;
            border-color: var(--app-border);
            box-shadow: none;
        }

        .game-icon {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 1rem;
            line-height: 1;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .game-info h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--app-text-primary);
            margin-bottom: 0.5rem;
            text-align: center;
            line-height: 1.3;
        }

        .game-info p {
            color: var(--app-text-secondary);
            font-size: 0.8125rem;
            text-align: center;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .game-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.5rem;
        }

        .game-category {
            padding: 0.25rem 0.625rem;
            border-radius: 9999px;
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            opacity: 0.9;
        }

        .game-difficulty {
            padding: 0.25rem 0.625rem;
            border-radius: 9999px;
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border: 1px solid;
        }

        .difficulty-easy {
            background: rgba(16, 185, 129, 0.15);
            color: var(--color-success);
            border-color: var(--color-success);
        }

        .difficulty-medium {
            background: rgba(245, 158, 11, 0.15);
            color: var(--color-warning);
            border-color: var(--color-warning);
        }

        .difficulty-hard {
            background: rgba(239, 68, 68, 0.15);
            color: var(--color-error);
            border-color: var(--color-error);
        }

        .difficulty-info {
            background: rgba(6, 182, 212, 0.15);
            color: var(--color-info);
            border-color: var(--color-info);
        }

        /* Loading and Empty States */
        .loading-state, .no-games-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 4rem 2rem;
            color: var(--app-text-secondary);
        }

        .loading-spinner {
            width: 2rem;
            height: 2rem;
            border: 2px solid var(--app-border);
            border-top: 2px solid var(--app-accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-state h3, .no-games-state h3 {
            color: var(--app-text-primary);
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .loading-state p, .no-games-state p {
            font-size: 0.875rem;
            color: var(--app-text-secondary);
        }

        /* Footer */
        .footer {
            background: var(--app-surface);
            border-top: 1px solid var(--app-border);
            padding: 1.5rem;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            font-size: 0.8125rem;
            color: var(--app-text-muted);
        }

        .footer-shortcuts {
            display: flex;
            gap: 1rem;
        }

        .footer-shortcuts span {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        kbd {
            background: var(--app-bg);
            border: 1px solid var(--app-border);
            border-radius: 0.25rem;
            padding: 0.125rem 0.375rem;
            font-size: 0.75rem;
            font-family: monospace;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--app-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--app-border);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--app-text-muted);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 1.5rem 1rem 1rem;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .controls-section {
                padding: 1rem;
                position: static;
            }
            
            .main-content {
                padding: 1.5rem 1rem;
            }
            
            .games-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1rem;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
                gap: 0.5rem;
            }
            
            .footer-shortcuts {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 1rem;
            }
            
            .header-title {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
            
            .category-filters {
                gap: 0.375rem;
            }
            
            .category-btn {
                padding: 0.375rem 0.75rem;
                font-size: 0.75rem;
            }
        }

        /* Notification Animations */
        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutToRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-title">
                    <span class="header-icon">🎮</span>
                    <h1>Games Hub</h1>
                </div>
                <p class="header-subtitle">Retro Gaming Collection</p>
            </div>
        </header>

        <!-- Controls -->
        <div class="controls-section">
            <div class="search-wrapper">
                <div class="search-input-container">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    <input type="text" class="search-input" placeholder="Search games..." id="searchInput">
                </div>
            </div>
            
            <div class="category-filters" id="categoryFilters">
                <button class="category-btn active" data-category="all">All</button>
            </div>
        </div>

        <!-- Games Grid -->
        <main class="main-content">
            <div class="games-container">
                <div class="games-grid" id="gamesGrid">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <h3>Scanning Games...</h3>
                        <p>Looking for games in your collection</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>Games Hub v6.0.0</p>
                <div class="footer-shortcuts">
                    <span><kbd>ESC</kbd> Close</span>
                    <span><kbd>Ctrl</kbd> + <kbd>F</kbd> Search</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="./script.js"></script>
    <script>
        // GAMES HUB - COMPLETE INLINE JAVASCRIPT

        class GamesHub {
            constructor() {
                this.currentFilter = 'all';
                this.searchTerm = '';
                this.gamesData = null;
                this.categoriesData = null;
                this.init();
            }

            init() {
                console.log('🎮 Games Hub initializing...');
                
                this.loadGamesConfig();
                this.initSearch();
                this.initCategoryFilters();
                this.initKeyboardShortcuts();
                this.focusSearch();
                
                console.log('✅ Games Hub initialized successfully');
            }

            async loadGamesConfig() {
                try {
                    console.log('📁 Scanning for actual games in directory...');
                    
                    // Auto-detect games that actually exist
                    await this.autoDetectGames();
                    
                    if (Object.keys(this.gamesData || {}).length === 0) {
                        console.log('⚠️ No games found in directory scan');
                        this.showNoGamesFound();
                    } else {
                        console.log(`✅ Found ${Object.keys(this.gamesData).length} actual games`);
                        this.renderGames();
                        this.updateCategoryFilters();
                    }
                } catch (error) {
                    console.error('❌ Error scanning for games:', error);
                    this.showNoGamesFound();
                }
            }

            showNoGamesFound() {
                this.gamesData = {};
                this.categoriesData = {
                    "Instructions": {"icon": "📚", "color": "#6b7280"}
                };
                this.renderGames();
                this.updateCategoryFilters();
            }

            async autoDetectGames() {
                try {
                    // Known game directories to check
                    const knownGames = [
                        'pong', 'snake', 'tetris', 'space-invaders', 'dude-jump',
                        'breakout', 'asteroids', 'frogger', 'pacman', 'centipede',
                        'galaga', 'defender', 'missile-command', 'qbert', 'donkey-kong'
                    ];
                    
                    const detectedGames = {};
                    const gameCategories = {
                        "Arcade": {"icon": "🕹️", "color": "#dc2626"},
                        "Puzzle": {"icon": "🧩", "color": "#7c3aed"},
                        "Sports": {"icon": "⚽", "color": "#059669"},
                        "Platform": {"icon": "🦘", "color": "#ea580c"},
                        "Adventure": {"icon": "🗺️", "color": "#0891b2"},
                        "Racing": {"icon": "🏎️", "color": "#c2410c"}
                    };

                    // Try to detect each known game
                    for (const gameName of knownGames) {
                        try {
                            const gameUrl = `/cache/functions/games_hub/games/${gameName}/index.html`;
                            const response = await fetch(gameUrl, { method: 'HEAD' });
                            
                            if (response.ok) {
                                console.log(`✅ Detected game: ${gameName}`);
                                detectedGames[gameName] = this.generateGameMetadata(gameName);
                            }
                        } catch (e) {
                            // Game doesn't exist, continue
                        }
                    }
                    
                    this.gamesData = detectedGames;
                    this.categoriesData = gameCategories;
                    
                    console.log(`🎮 Auto-detected ${Object.keys(detectedGames).length} games`);
                } catch (error) {
                    console.error('❌ Error auto-detecting games:', error);
                    this.gamesData = {};
                }
            }

            generateGameMetadata(gameName) {
                const gameMap = {
                    'pong': { name: '🏓 Pong', description: 'Classic table tennis arcade game', category: 'Sports', icon: '🏓', difficulty: 'Easy', file: 'pong/index.html' },
                    'snake': { name: '🐍 Snake', description: 'Nokia\'s legendary snake game', category: 'Arcade', icon: '🐍', difficulty: 'Easy', file: 'snake/index.html' },
                    'tetris': { name: '🧩 Tetris', description: 'The ultimate tile-matching puzzle', category: 'Puzzle', icon: '🧩', difficulty: 'Medium', file: 'tetris/index.html' },
                    'space-invaders': { name: '👾 Space Invaders', description: 'Defend Earth from alien invasion', category: 'Arcade', icon: '👾', difficulty: 'Medium', file: 'space-invaders/index.html' },
                    'dude-jump': { name: '🦘 Dude Jump', description: 'Endless runner with jumping action', category: 'Platform', icon: '🦘', difficulty: 'Hard', file: 'dude-jump/index.html' },
                    'breakout': { name: '🧱 Breakout', description: 'Classic brick-breaking arcade game', category: 'Arcade', icon: '🧱', difficulty: 'Easy', file: 'breakout/index.html' },
                    'asteroids': { name: '☄️ Asteroids', description: 'Space shooter with physics', category: 'Arcade', icon: '☄️', difficulty: 'Medium', file: 'asteroids/index.html' },
                    'frogger': { name: '🐸 Frogger', description: 'Cross the road and river safely', category: 'Arcade', icon: '🐸', difficulty: 'Medium', file: 'frogger/index.html' },
                    'pacman': { name: '👻 Pac-Man', description: 'Eat dots and avoid ghosts', category: 'Arcade', icon: '👻', difficulty: 'Easy', file: 'pacman/index.html' },
                    'centipede': { name: '🐛 Centipede', description: 'Shoot the descending centipede', category: 'Arcade', icon: '🐛', difficulty: 'Medium', file: 'centipede/index.html' }
                };

                return gameMap[gameName] || {
                    name: this.capitalizeWords(gameName),
                    description: `Classic ${gameName} game`,
                    category: 'Arcade',
                    icon: '🎮',
                    difficulty: 'Medium',
                    file: `${gameName}/index.html`
                };
            }

            renderGames() {
                const gamesGrid = document.getElementById('gamesGrid');
                if (!gamesGrid) return;

                // Clear existing content
                gamesGrid.innerHTML = '';

                if (!this.gamesData || Object.keys(this.gamesData).length === 0) {
                    gamesGrid.innerHTML = `
                        <div class="no-games-state">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">🎮</div>
                            <h3>No Games Found</h3>
                            <p>No games were detected in your /games/ directory.</p>
                            <p style="margin-top: 0.5rem; font-size: 0.75rem; opacity: 0.7;">
                                Add games to <code>/cache/functions/games_hub/games/[game-name]/index.html</code>
                            </p>
                        </div>
                    `;
                    return;
                }

                // Generate game cards for ONLY detected games
                for (const [gameId, gameData] of Object.entries(this.gamesData)) {
                    const category = gameData.category || 'Other';
                    const categoryInfo = this.categoriesData[category] || {icon: '🎮', color: '#6b7280'};
                    
                    const gameCard = document.createElement('div');
                    gameCard.className = 'game-card';
                    gameCard.setAttribute('data-category', category);
                    gameCard.setAttribute('data-game-id', gameId);
                    gameCard.onclick = () => this.launchGame(gameId, gameData.file);
                    
                    gameCard.innerHTML = `
                        <div class="game-icon">${gameData.icon || '🎮'}</div>
                        <div class="game-info">
                            <h3>${gameData.name || this.capitalizeWords(gameId)}</h3>
                            <p>${gameData.description || 'Classic retro game'}</p>
                            <div class="game-meta">
                                <span class="game-category" style="background-color: ${categoryInfo.color}20; color: ${categoryInfo.color};">
                                    ${categoryInfo.icon} ${category}
                                </span>
                                <span class="game-difficulty difficulty-${(gameData.difficulty || 'medium').toLowerCase()}">
                                    ${gameData.difficulty || 'Medium'}
                                </span>
                            </div>
                        </div>
                    `;
                    
                    gamesGrid.appendChild(gameCard);
                }

                console.log(`🎮 Rendered ${Object.keys(this.gamesData).length} actual game cards`);
            }

            updateCategoryFilters() {
                const categoryFiltersContainer = document.getElementById('categoryFilters');
                if (!categoryFiltersContainer || !this.categoriesData) return;

                // Clear existing filters except "All"
                categoryFiltersContainer.innerHTML = '<button class="category-btn active" data-category="all">All</button>';

                // Add category filters based on loaded data
                for (const [category, info] of Object.entries(this.categoriesData)) {
                    const filterButton = document.createElement('button');
                    filterButton.className = 'category-btn';
                    filterButton.setAttribute('data-category', category);
                    filterButton.textContent = `${info.icon} ${category}`;
                    
                    filterButton.addEventListener('click', () => {
                        this.currentFilter = category;
                        this.updateActiveFilter(filterButton);
                        this.filterGames();
                    });
                    
                    categoryFiltersContainer.appendChild(filterButton);
                }

                console.log(`🏷️ Updated category filters with ${Object.keys(this.categoriesData).length} categories`);
            }

            initSearch() {
                const searchInput = document.getElementById('searchInput');
                if (!searchInput) return;

                searchInput.addEventListener('input', (e) => {
                    this.searchTerm = e.target.value.toLowerCase();
                    this.filterGames();
                });

                // Clear search on escape
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        searchInput.value = '';
                        this.searchTerm = '';
                        this.filterGames();
                    }
                });
            }

            initCategoryFilters() {
                // Handle clicks on "All" button
                const allButton = document.querySelector('.category-btn[data-category="all"]');
                if (allButton) {
                    allButton.addEventListener('click', () => {
                        this.currentFilter = 'all';
                        this.updateActiveFilter(allButton);
                        this.filterGames();
                    });
                }
            }

            updateActiveFilter(activeFilter) {
                const categoryFilters = document.querySelectorAll('.category-btn');
                categoryFilters.forEach(f => f.classList.remove('active'));
                activeFilter.classList.add('active');
            }

            filterGames() {
                const gameCards = document.querySelectorAll('.game-card');
                let visibleCount = 0;
                
                gameCards.forEach(card => {
                    const name = card.querySelector('h3').textContent.toLowerCase();
                    const description = card.querySelector('p').textContent.toLowerCase();
                    const category = card.getAttribute('data-category');
                    
                    const matchesSearch = !this.searchTerm || 
                        name.includes(this.searchTerm) || 
                        description.includes(this.searchTerm) ||
                        category.toLowerCase().includes(this.searchTerm);
                        
                    const matchesCategory = this.currentFilter === 'all' || 
                        category === this.currentFilter;
                    
                    if (matchesSearch && matchesCategory) {
                        card.style.display = 'block';
                        visibleCount++;
                    } else {
                        card.style.display = 'none';
                    }
                });

                console.log(`🔍 Filtered games: ${visibleCount} visible`);
            }

            initKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    // Don't interfere when typing in search
                    if (e.target.tagName === 'INPUT') {
                        return;
                    }

                    switch(e.key) {
                        case 'Escape':
                            window.close();
                            break;
                        case 'f':
                            if (e.ctrlKey || e.metaKey) {
                                e.preventDefault();
                                this.focusSearch();
                            }
                            break;
                        case 'r':
                            if (e.ctrlKey || e.metaKey) {
                                e.preventDefault();
                                this.reloadGames();
                            }
                            break;
                        case '/':
                            e.preventDefault();
                            this.focusSearch();
                            break;
                    }
                });
            }

            focusSearch() {
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.focus();
                    searchInput.select();
                }
            }

            async reloadGames() {
                console.log('🔄 Reloading games...');
                
                // Show loading state
                const gamesGrid = document.getElementById('gamesGrid');
                if (gamesGrid) {
                    gamesGrid.innerHTML = `
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            <h3>🔄 Rescanning Games...</h3>
                            <p>Looking for new games...</p>
                        </div>
                    `;
                }
                
                // Reload games configuration
                await this.loadGamesConfig();
            }

            launchGame(gameId, gameFile) {
                if (!gameFile) {
                    this.showNotification('⚠️ Game file not found!', 'This game appears to be misconfigured.', 'warning');
                    return;
                }
                
                console.log(`🎮 Launching game: ${gameId}`);
                
                const gameUrl = `/cache/functions/games_hub/games/${gameFile}`;
                
                const gameWindow = window.open(
                    gameUrl,
                    `game_${gameId}`,
                    'width=1000,height=700,scrollbars=yes,resizable=yes,menubar=no,toolbar=no'
                );
                
                if (!gameWindow) {
                    this.showNotification(
                        '🚫 Popup Blocked!', 
                        'Please allow popups for this site to play games. Check your browser settings or popup blocker.',
                        'error'
                    );
                } else {
                    console.log(`✅ Game launched: ${gameId}`);
                    this.addLaunchFeedback(gameId);
                    this.showNotification('🎮 Game Launched!', `${gameId} is now opening in a new window.`, 'success');
                }
            }

            addLaunchFeedback(gameId) {
                // Find the game card and add visual feedback
                const gameCard = document.querySelector(`[data-game-id="${gameId}"]`);
                if (gameCard) {
                    gameCard.style.borderColor = '#06b6d4';
                    gameCard.style.transform = 'translateY(-4px) scale(1.02)';
                    
                    setTimeout(() => {
                        gameCard.style.borderColor = '';
                        gameCard.style.transform = '';
                    }, 2000);
                }
            }

            showNotification(title, message, type = 'info') {
                // Remove existing notifications
                const existingNotifications = document.querySelectorAll('.notification');
                existingNotifications.forEach(n => n.remove());

                // Create notification
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                
                const colors = {
                    success: '#10b981',
                    warning: '#f59e0b',
                    error: '#ef4444',
                    info: '#06b6d4'
                };
                
                notification.style.cssText = `
                    position: fixed;
                    top: 1rem;
                    right: 1rem;
                    background: var(--app-surface);
                    border: 1px solid ${colors[type]};
                    border-left: 4px solid ${colors[type]};
                    border-radius: 0.5rem;
                    padding: 1rem;
                    max-width: 360px;
                    z-index: 10000;
                    color: var(--app-text-primary);
                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(0, 0, 0, 0.05);
                    backdrop-filter: blur(10px);
                    animation: slideInFromRight 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    font-size: 0.875rem;
                `;
                
                notification.innerHTML = `
                    <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 0.25rem; color: ${colors[type]};">${title}</div>
                            <div style="color: var(--app-text-secondary); line-height: 1.4;">${message}</div>
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" style="
                            background: none;
                            border: none;
                            color: var(--app-text-muted);
                            cursor: pointer;
                            padding: 0.25rem;
                            border-radius: 0.25rem;
                            transition: all 0.2s;
                            font-size: 1rem;
                            line-height: 1;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        " onmouseover="this.style.background='var(--app-surface-hover)'; this.style.color='var(--app-text-primary)'" 
                           onmouseout="this.style.background='none'; this.style.color='var(--app-text-muted)'">✕</button>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.style.animation = 'slideOutToRight 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                        setTimeout(() => notification.remove(), 300);
                    }
                }, 5000);
            }

            capitalizeWords(str) {
                return str.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            }
        }

        // Global function for backward compatibility
        function launchGame(gameId, gameFile) {
            if (window.gamesHub) {
                window.gamesHub.launchGame(gameId, gameFile);
            } else {
                console.error('❌ Games Hub not initialized');
            }
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            window.gamesHub = new GamesHub();
        });

        // Also initialize immediately if DOM is already loaded
        if (document.readyState === 'loading') {
            // Wait for DOMContentLoaded
        } else {
            // DOM is already loaded
            window.gamesHub = new GamesHub();
        }

        // Global error handler for better debugging
        window.addEventListener('error', (e) => {
            console.error('🚨 Global Error:', e.error);
        });

        // Console branding
        console.log(`
🎮 GAMES HUB - SELF-CONTAINED EDITION
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Version: 6.0.0
Architecture: Single File + Auto-Detection
Theme: Inline Dark Theme
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Features:
• Auto-detects real games only
• No placeholder games
• Complete inline styling
• Mobile responsive design

Keyboard Shortcuts:
• ESC - Close window
• Ctrl+F or / - Focus search  
• Ctrl+R - Reload games

🚀 Ready for retro gaming!
`);
    </script>
</body>
</html>